# 뷰
- 다른 기본 테이블로부터 유도된 이름을 가진 가상 테이블
- 기본 테이블은 물리적으로 구현되어 데이터가 실제로 저장되지만 뷰는 물리적으로 구현X
- 복잡한 질의를 간단하게 표현하는 수단
- 데이터 독립성을 높이기 위해 사용
- 사용자에게 뷰는 기본 릴레이션과 동일하게 조작할 수 있는 정상적인 릴레이션처럼 보임
- 뷰에 대한 연산은 뷰의 정의에 사용된 기본 릴레이션에 대한 연산으로 변환되어 수행된다
- 뷰는 또다른 뷰를 참조할 수 있다
![[스크린샷 2024-01-11 오후 12.58.21.png]]
## 뷰의 생성
- 뷰의 이름은 기본 릴레이션 이름과 같을 수 없다
- 뷰 정의문에서 열이름을 명세하지 않으면 기존 테이블 애트리뷰트를 그대로 상속받는다
- 애트리뷰트 이름을 반드시 지정해야 하는 경우
- 뷰를 정의하는 SELECT 절에 산술식 또는 집단 함수에 사용된 애트리뷰트가 있는 경우
- 뷰의 정의에 조인이 포함되어 있고 두 개 이상의 다른 릴레이션으로부터 가져온 애트리뷰트들의 이름이 같은경우
- UNION / ORDER BY 사용 불가
- WITH CHECK OPTION 절
- INSERT문과 UPDATE문이 뷰가 선택할 수 없는 튜플들을 생성할 수 없도록 보장한다
- 즉 투플이 뷰에서 사리지도록 투플을 수정할 수 없다
- 뷰에 투플 갱신, 삽입 연산을 실핼할 때 이를 위반하면 실행을 거부한다
```mysql
CREATE VIEW 뷰_이름[(열_이름_리스트)]
	AS SELECT
	[WITH CHECK OPTION];
```

```mysql
# 학생 테이블에서 컴퓨터과 학생들로 구성된 CSTUDENT 뷰 생성
CREATE VIEW CSTUDENT(SNO, SNAME, YEAR)
	AS SELECT SNO, SNAME, YEAR
		FROM STUDENT
		WHERE DEPT = "컴퓨터"
		WITH CHECK OPTION;
```
## 뷰의 제거
- 뷰의 정의 변경은 불가능
```mysql
DROP VIEW 뷰_이름 {RESTRICT / CASCADE};
DROP VIEW CSTUDENT RESTRIC;
```
## 뷰의 조직 연산
- 뷰의 검색은 자유롭게 가능
- 그러나 삽입 삭제, 갱신의 대상이 되는것은 아님
- 모든 뷰가 갱신의 대상 X
- 뷰가 만일 기본 테이블의 기본 키를 포함하고 있다면 갱신 가능
- 일반적으로 뷰는 변경을 할 수 없는 뷰, 이론적으로 변경이 가능한 뷰, 실제로 변경이 가능한 뷰로 구분할 수 있다
![[스크린샷 2024-01-11 오후 3.19.31.png]]
### 뷰의 변경이 허용되지 않는 조건
- 뷰의 열이 상수나 산술 연산자 또는 함수가 사용된 산술식이면 변경 불가
- 집계함수가 관련되어 정의된 뷰는 변경할 수 없다
- DISTINCT, GROUP BY, HAVING절이 사용되어 정의된 뷰는 변경할 수 없다
- 두개 이상의 테이블이 관련되어 정의된 뷰는 변경할 수 없다
- 변경할 수 없는 뷰를 깇토로 정의된 뷰는 변경할 수 없다
## 뷰의 장점
- 뷰는 복잡한 질의를 간단하게 표현할 수 있게 한다
- 뷰는 데이터 무결성을 보장하는데 활용된다 (WITH CHECK OPTION)
- 뷰는 데이터의 논리적 독립성을 어느 정도 제공한다
- 뷰가 정의된 기본 테이블이 확장되거나 뷰에 속해 있는 데이터베이스에 테이블이 더 늘어나도 기존의 뷰를 사용하는 프로그램이나 사용자는 아무런 영향을 받지 않는다
- 응용에 영향을 주지 않으면서 기본 릴레이션의 스키마를 변경할 수 있다
- 뷰는 데이터 접근을 제어함으로서 보안을 제공할 수 있다.
- 뷰를 통해서만 데이터를 접근하면 뷰에 나타나지 않은 데이터를 안전하게 보호하는 효율적인 기법으로 사용할 수 있다
- 사용자의 데이터 관리를 간단하고 쉽게 해준다
- 필요한 데이터만 뷰로 정의해서 처리할 수 있기 때문에 관리가 용이하고 질의문이 간단해진다
- 여러 사용자의 상이한 응용이나 요구를 지원해줄 수 있다
- 하나의 테이블로 여러 개의 상이한 뷰를 정의하여 사용자의 요구에 따라 활용하게끔한다
## 뷰의 단점
- 뷰는 정의를 변경할 수 없다
- 뷰는 삽입, 삭제, 갱신 연산에 많은 제한을 가지고 있다
- 성능 저하(디스크 접근 횟수가 많아진다)
