## 1. 기억 클래스의 개념
> 모든 변수는 자료형과 기억 클래스를 가진다. 프로그래머는 자료형을 결정함과 동시에 얼마나 많은 기억공간을 차지할 것인지 어떤 종류의 자료를 가질 것인지를 결정한다.
> 어떤 변수가 기억공간에 언제 할당되는가를 경정하고 사용하는 변수의 유효 영역을 결정하는 것이 기억 클래스이다.
> 유효 영역이란 어떤 변수가 프로그램의 어느 부분에서 의미를 갖는가를 나타낸다. 즉 어떤 범위에서 사용이 가능한가를 말한다. 유효 영역은 변수의 선언 위치에 따라 달라진다. 블록 내부에서 선언되었다면 해당 블록에서만 사용 가능하고(지역변수), 함수 밖에서 선언되었다면 프로그램 전체에서 사용할 수 있다. (전역변수)
> 존속기간은 변수가 메모리 상에 얼마나 오랫동안 존재하는가를 나타낸다. 블록이 활성화될 때 기억장소를 확보하는 기억 클래스 (auto, register)와 실행시간 동안 기억장소를 확보하는 시억 클래스(static, extern)로 구분한다.
> 선언되는 위치와 기억공간이 할당되는 시기에 따라 할당된 공간에 얼마나 유지되는지도 달라진다.

![![임용1차/전공/C/#^Table4]]
## 1.1 지역변수와 전역변수
- 지역변수
> 함수가 실행될 때 변수가 메모리에 적재되고 함수가 종료되면 함수가 사용했던 모든 지역변수는 자동으로 소멸
> 변수의 사용범위가 함수 내부로 제한이 되므로 서로 다른 함수에 같은 변수명 사용이 가능하다.
> 지역 변수는 변수가 선언된 블록이 시작될 때 메모리에 공간이 만들어지며 블록이 끝나면 메모리에서 사라지게 된다.
> 지역변수는 컴파일러가 자동으로 초기화시켜주지 않아 쓰레기값을 갖게 된다.
> 지역변수는 초기화 과정이 꼭 필요

- 전역변수
> 전역변수는 모든 블록에서 사용할 수 있다. 전역변수는 프로그램이 시작될 때 메모리에 처음 적재되고 프로그램이 완전히 끝날 때까지 메모리에 남아있는다.
> 전역변수의 선언은 함수의 블록 외부에 선언한다. 전역변수는 함수 외부에서 선언되어 모든 함수가 함께 사용하는 공유변수의 특징이 있다. 따라서 같은 이름을 갖는 전역변수를 둘 이상 동시에 사용할 수 없다.

- 변수를 참조하는 순서
> 같은 이름으로 지역변수와 전역변수를 동시에 선언할 수 있지만 우선순위가 존대
> - 지역변수가 전역변수보다 우선순위가 높다
> - 같은 지역변수라도 하위의 블록 내에서 선언된 지역변수가 우선순위가 더 높다.

![[스크린샷 2024-01-05 오후 4.11.09.png]]

# 2. 자동 변수
- 가장 일반적인 auto 변수 (디폴트)
- 특정 범위 내에서만 사용되는 변수로 선언된 블록이나 함수 내에서만 사용이 가능
- 일반적으로 지역변수는 auto, 키워드는 생략
```C
auto int a;
int a;
```
> 선언된 블록이나 함수 내에서 사용 가능하고 유효 영역을 벗어나면 사용할 수 없다. 즉 유효영역은 자신이 선언된 블록 내부이면, 존속 기간은 함수가 수행되는 동안이다.
> 스택에 공간이 확보되며 auto 변수는 쓰레기 값을 갖게 되기 때문에 초기화 과정이 필요하다.

# 3. 외부 변수
> 블록들과 함수 간에 정보를 전달하는 방법은 외부 변수를 사용하는 것, 
> 키워드 `extern`은 컴파일러에게 변수가 현재 범위가 아닌 다른 곳에서 선언되었다는 것을 알리는 역할을 한다.
> 외부 변수는 프로그램이 실행되는 동안 값을 유지하므로 여러 함수에서 공유하는 값을 저장할 때 유용하게 사용

- 유효 영역: 선언된 위치부터 파일 끝까지
- 존속 기간: 프로그램이 실행되는 동안
```C
main.c

int a = 10;

main() {
	int b;
}

func.c

function() {
	extern int a;
}
```
# 4. 정적 변수
- 정적 내부변수
- 정적 외부변수
- 기억 영역을 프로그램이 끝날 때까지 계속 유지하는 변수
- 유효 영역: 함수 내부
- 제어가 블록을 벗어나더라도 static으로 선언된 변수에 저장된 값은 프로그램이 종료될 때까지 유지
- 정적변수는 0으로 자동 초기화 (정수 0, 실수형 0.0, char \0, 포인터 null)
```C
static int a;
static float b;
```
## 내부 정적 변수
- 블록내부에서 선언된 변수
- 유효 영역: 선언된 블록 내부
- 존속 기간: 프로그램이 수행되는 동안
## 외부 정적 변수
- 함수 외부에서 선언된 변수
- 유효 영역: 선언된 파일에서만 사용 가능
- 존속 기간: 프로그램이 수행되는 기간
- 블록을 벗어나더라도 그 값은 계속 유지
- 유효 영역: 자신이 선언된 함수 이후
- 이전 선언된 변수에서는 사용 불가능
- extern을 사용하려고 해도 불가능
- 특정 함수에서는 전역 변수, 일부 함수에서는 비공개 변수
```C

#include <stdio.h>

int main(void) {
 int count;
  void cmp();
  for(count = 1; count <= 5; count++) {
    printf("Step %d\n", count);
    cmp();
  }
}

static int number = 1;

void cmp() {
  int atc = 1;
  static int stv = 1;
  printf("atv=%d, stv=%d\n", atc++, stv++);
  printf("number = %d\n", number);
}
```
main함수 이후에 number가 선언되었기 때문에 main함수는 number를 사용할 수 없다.
# 5. 레지스터 변수
- 프로그램의 실행 속도를 높이기 위해 cpu내 레지스터에 자료를 저장하기 위해 사용된다.
- 블록이 시작되면 레지스터 변수는 레지스터로 할당되고 블록이 끝나면 레지스터에서 사라진다
- 반복문에서 제어변수로 많이 사용되는 변수를 register로 선언하면 실행속도를 증가시킬 수 있다.
- 선언문에서 자료형 int는 생략 가능하다.
- 레지스터 변수의 자료형은 int, char, short만 사용할 수 있다.
- double, float형의 실수형은 사용할 수 없다.
- 레지스터는 한정된 자원이기 때문에 일시적으로 사용되고 반환되는 성격을 가진 지역변수에만 지정할 수 있으며 전역변수에는 레지스터 기억 클래스를 지정할 수 없다.
```C
register int a;
register b;
```
# 6. 함수 정의를 위한 저장 클래스
- extern, static은 함수 정의에서 사용할 수 있으며, 저장 클래스를 지정하려 할 때 사용한다.
- extern은 생략 가능, 유효 영역은 파일의 끝이고, 다른 파일에서 함수를 사용할 수 있다.
- static은 생략할 수 없으며, static으로 명시된 함수는 함수의 유효 영역을 정의된 파일 외부로 제한하기 위해 사용된다. 유효 영역은 파일의 끝이고, 다른 파일에서 사용할 수 없다. (private)
![[스크린샷 2024-01-05 오후 4.41.55.png]]
